# Concepts

The Nature System focus on **data** and **relations** between data.  Data are the  **business goals**, so relations can let you achieve goal one by one.  This is little like workflow or BPMN,  but they are two very different things. The last tell us to **do something**, yet the first tell us we **need something**. How-to-do is very complex. and what-your-need is simple and more important.  Nature let you focus on important things and let you manage them easily.

## Data

Data are immutable, when they are created you can't modify or delete it.

There are two kind of data: `meta` and `instance`. 

### Meta

`Meta` tell us what the business is and how to used it. It is like program language's `Class`.

`Meta` use `key` property to identify each of them. It's a string type, so you can give any value you like to it. But for convention, you should use "/" to separate you large-small domain as its value, for example "/sale/order".

#### MetaType

`Meta` have types called `MetaType`, all types list here:

| Type     | Prefix | Description                                                  |
| -------- | ------ | ------------------------------------------------------------ |
| Business | /B     | Used by business, but need to register to `meta` table before to be used. |
| System   | /S     | Used by Nature itself                                        |
| Dynamic  | /D     | Used by business, need not to register to `meta` table, it's used for defining workflow as `runtime` |
| Null     | /N     | The terminate for the end of the workflow.                   |

`Meta` use `MetaType` prefix property as `Meta#full_key`'s prefix.  if the key is "/sale/order" the `Meta#full_key` should be "/B/sale/order".

#### State

Some `Meta` has states, for example, a order can new, paid, picked, outbound, delivering states etcetera.  State can includes sub states,  and states can be mutually exclusive. you can use the following symbols to form a `Meta`'s state property.

| symbol | description                                                  |
| ------ | ------------------------------------------------------------ |
| ,      | **used to separate between states**                          |
| []     | express a sub-states list                                    |
| \|     | states connected with "\|" that only one can be used for `instance`. |

A exampleï¼š

Suppose we have s1,s2,s3,s4 four states, s1 has s1-1, s1-2, s1-3, s1-4 four sub-states, s1-3 and s1-4 are mutexes, s3 and s4 are mutexes too, this `meta`'s  state would be:

```
s1[s1-1,s1-2,s1-3|s1-4],s2,s3|s4
```

### instance

`instance` is `meta`'s runtime's form. It's like program language's `Object`. It is generated by c`converter` or input from out of Nature.

So a meta can have any number of it's instances.

`instance`  is immutable once it is created, so`instance` uses status version to express a change.

## Relation

A relation will connect tow and only two `meta`s.  but one `meta` can connect to many other `mets`s by many relations.

A relation has direction, begin from **from**-`meta` end to **to**-`meta`.

A relation defined a `converter` to convert from **from**-`meta`'s instance' to **to**-`meta`'s instance.

### converter

Converter is a logical outside of Nature. is can be implemented in many forms.  up to now Nature support the following forms

- http | https
- local rust

Nature use converters to glue all logical together, and make them loose coupling and powerful



## unfinished



There are good news for developers too, __short process__ will be easy to develop, 
and `Nature` try to run the __short process__ in parallel.

![Alt text](../img/%E5%B9%BB%E7%81%AF%E7%89%8713.jpg)

`Nature` only insert `Instance` to db, no __deletion__ no __update__.
`Nature` use __state version__ to express any chang on an `instance` and not all `Thing` have states.
This feature let `Nature` run converter equally for any times, tt is __idempotent__.